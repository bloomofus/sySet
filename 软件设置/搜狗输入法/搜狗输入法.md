> 参考教程：https://zhuanlan.zhihu.com/p/1924444784191313056

[Ubuntu 24.04](https://zhida.zhihu.com/search?content_id=259906450&content_type=Article&match_order=1&q=Ubuntu+24.04&zd_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJ6aGlkYV9zZXJ2ZXIiLCJleHAiOjE3NjIzMzA3NzQsInEiOiJVYnVudHUgMjQuMDQiLCJ6aGlkYV9zb3VyY2UiOiJlbnRpdHkiLCJjb250ZW50X2lkIjoyNTk5MDY0NTAsImNvbnRlbnRfdHlwZSI6IkFydGljbGUiLCJtYXRjaF9vcmRlciI6MSwiemRfdG9rZW4iOm51bGx9.bO78oz8TOGQMnfSRSf4-Mns4OogSMwcBmiTcxtqE6_A&zhida_source=entity)默认使用[Fcitx5](https://zhida.zhihu.com/search?content_id=259906450&content_type=Article&match_order=1&q=Fcitx5&zd_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJ6aGlkYV9zZXJ2ZXIiLCJleHAiOjE3NjIzMzA3NzQsInEiOiJGY2l0eDUiLCJ6aGlkYV9zb3VyY2UiOiJlbnRpdHkiLCJjb250ZW50X2lkIjoyNTk5MDY0NTAsImNvbnRlbnRfdHlwZSI6IkFydGljbGUiLCJtYXRjaF9vcmRlciI6MSwiemRfdG9rZW4iOm51bGx9.P3C6YZ_6zHmLEVG2mF6PxH7MXD_IhoRnj8Yho3HM1us&zhida_source=entity)和[Wayland](https://zhida.zhihu.com/search?content_id=259906450&content_type=Article&match_order=1&q=Wayland&zd_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJ6aGlkYV9zZXJ2ZXIiLCJleHAiOjE3NjIzMzA3NzQsInEiOiJXYXlsYW5kIiwiemhpZGFfc291cmNlIjoiZW50aXR5IiwiY29udGVudF9pZCI6MjU5OTA2NDUwLCJjb250ZW50X3R5cGUiOiJBcnRpY2xlIiwibWF0Y2hfb3JkZXIiOjEsInpkX3Rva2VuIjpudWxsfQ.cNf-qoVRFiB2u8eX_1sOWNpHkmyXFLpUOmjNxlc9ucw&zhida_source=entity)，与搜狗输入法的Fcitx4框架存在兼容性问题。本教程通过降级到Fcitx4、切换到[Xorg](https://zhida.zhihu.com/search?content_id=259906450&content_type=Article&match_order=1&q=Xorg&zd_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJ6aGlkYV9zZXJ2ZXIiLCJleHAiOjE3NjIzMzA3NzQsInEiOiJYb3JnIiwiemhpZGFfc291cmNlIjoiZW50aXR5IiwiY29udGVudF9pZCI6MjU5OTA2NDUwLCJjb250ZW50X3R5cGUiOiJBcnRpY2xlIiwibWF0Y2hfb3JkZXIiOjEsInpkX3Rva2VuIjpudWxsfQ.Rm4npdqG8GypAxGYW8VvpLchncXMT9QYLXc4jBYYU00&zhida_source=entity)显示服务器、安装必要依赖等步骤，解决安装冲突和显示异常问题。经实际验证，可成功在Ubuntu 24.04上稳定运行搜狗输入法。

## 前言

Ubuntu 24.04 LTS 作为最新的长期支持版本，默认使用 Fcitx5 输入法框架，而搜狗输入法目前仍然基于 Fcitx4 框架。本教程将详细介绍如何在 Ubuntu 24.04 上成功安装搜狗输入法，并解决常见的兼容性问题。

## 环境说明

- **系统版本**：Ubuntu 24.04 LTS
- **搜狗输入法版本**：sogoupinyin_4.2.1.145_amd64.deb
- **输入法框架**：Fcitx4（需要从 Fcitx5 降级）

## 官方资源

- **下载地址**：[https://shurufa.sogou.com/linux](https://link.zhihu.com/?target=https%3A//shurufa.sogou.com/linux)
- **安装向导**：[https://shurufa.sogou.com/linux/guide](https://link.zhihu.com/?target=https%3A//shurufa.sogou.com/linux/guide)

## 安装步骤

### 第一步：系统环境准备

由于 Ubuntu 24.04 默认使用 Fcitx5，而搜狗输入法需要 Fcitx4 框架，我们需要先卸载 Fcitx5 并安装 Fcitx4。

```text
# 更新系统软件包
sudo apt update

# 卸载 Fcitx5 和 IBus（如果存在）
sudo apt remove --purge fcitx5* ibus*

# 清理系统残留
sudo apt autoremove && sudo apt autoclean

# 安装 Fcitx4 输入法框架
sudo apt install fcitx

# 设置 Fcitx 开机自启动
sudo cp /usr/share/applications/fcitx.desktop /etc/xdg/autostart/
```

### 第二步：配置语言支持

1. 打开系统设置：`Settings` → `Region & Language`
2. 点击 `Manage Installed Languages`
3. 在弹出的"语言支持"窗口中：

- 点击 `Install / Remove Languages...`
- 勾选 `Chinese (simplified)`，点击 `Apply`
- 在 `Keyboard input method system` 下拉菜单中选择 `fcitx`
- 点击 `Apply System-Wide`

**注意**：如果在键盘输入法系统中没有"fcitx"选项，说明第一步的安装可能有问题，请重新执行 `sudo apt install fcitx`。

### 第三步：下载搜狗输入法

前往官方下载页面：[https://shurufa.sogou.com/linux](https://link.zhihu.com/?target=https%3A//shurufa.sogou.com/linux)

1. 选择 `Linux 个人版`
2. 选择 `X86_64` 架构
3. 下载 `sogoupinyin_4.2.1.145_amd64.deb` 安装包

或者使用命令行直接下载：

```text
# 创建下载目录
mkdir -p ~/Downloads/sogou

# 进入下载目录
cd ~/Downloads/sogou

# 下载搜狗输入法（请以官网最新版本为准）
wget https://ime.sogoucdn.com/202308071026/sogoupinyin_4.2.1.145_amd64.deb
```

### 第四步：安装搜狗输入法

```text
# 进入下载目录
cd ~/Downloads/sogou

# 安装搜狗输入法
sudo dpkg -i sogoupinyin_4.2.1.145_amd64.deb

# 安装必要的依赖包
sudo apt install libqt5qml5 libqt5quick5 libqt5quickwidgets5 qml-module-qtquick2
sudo apt install libgsettings-qt1

# 修复可能的依赖关系问题
sudo apt install -f
```

### 第五步：解决显示问题（重要）

Ubuntu 24.04 默认使用 Wayland 显示服务器，可能导致搜狗输入法出现闪烁或无法正常显示的问题。需要强制使用 Xorg：

```text
# 编辑 GDM 配置文件
sudo vim /etc/gdm3/custom.conf

# 找到以下行并取消注释（删除行首的 #）：
# WaylandEnable=false

# 修改后应该是：
WaylandEnable=false
```

如果不熟悉 vim 编辑器，也可以使用图形化编辑器：

```text
sudo gedit /etc/gdm3/custom.conf
```

### 第六步：重启系统

```text
sudo reboot
```

### 第七步：配置输入法

重启后进行最终配置：

1. **检查输入法状态**：

- 右上角应该出现输入法图标（键盘或"搜"字样）
- 如果没有，请继续下面的步骤

1. **配置 Fcitx**：
   \# 打开 Fcitx 配置工具 [fcitx-configtool](https://zhida.zhihu.com/search?content_id=259906450&content_type=Article&match_order=1&q=fcitx-configtool&zd_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJ6aGlkYV9zZXJ2ZXIiLCJleHAiOjE3NjIzMzA3NzQsInEiOiJmY2l0eC1jb25maWd0b29sIiwiemhpZGFfc291cmNlIjoiZW50aXR5IiwiY29udGVudF9pZCI6MjU5OTA2NDUwLCJjb250ZW50X3R5cGUiOiJBcnRpY2xlIiwibWF0Y2hfb3JkZXIiOjEsInpkX3Rva2VuIjpudWxsfQ.7XjN7CSrZvSySzORWSm4xAsVEfUr5KIvezdFBVyy3hI&zhida_source=entity)
   在配置界面中：

- 点击左下角的 `+` 号
- 取消勾选 `Only Show Current Language`
- 搜索 `sogou`
- 添加 `Sogou Pinyin` 到输入法列表

1. **测试输入法**：

- 使用 `Ctrl + Space` 切换输入法
- 打开任意文本编辑器测试中文输入